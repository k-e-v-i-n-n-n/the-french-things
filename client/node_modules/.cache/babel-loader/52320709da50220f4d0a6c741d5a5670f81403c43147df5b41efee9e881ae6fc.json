{"ast":null,"code":"var _jsxFileName = \"/Users/kevinlocke/Dropbox/Development/code/encodeur/Phase-5-Project-and-Notes/phase-5-repo/client/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AppContext } from \"../Context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [isSignup, setIsSignup] = useState(false);\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const [passwordConfirmation, setPasswordConfirmation] = useState();\n  const [errors, setErrors] = useState();\n  const navigate = useNavigate();\n  const {\n    user,\n    setUser\n  } = useContext(AppContext);\n  function condRend(e) {\n    e.preventDefault();\n    setIsSignup(!isSignup);\n    setErrors();\n  }\n  function createAccount(e) {\n    e.preventDefault();\n    fetch(\"/signup\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username,\n        password,\n        password_confirmation: passwordConfirmation\n      })\n    }).then(r => handleResponse(r));\n  }\n  function login(e) {\n    e.preventDefault();\n    fetch(\"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }).then(r => handleResponse(r));\n  }\n  function handleResponse(r) {\n    if (r.ok) {\n      r.json().then(r => {\n        setUser(r);\n        navigate(\"/\");\n      });\n    } else {\n      r.json().then(err => {\n        setErrors(err.errors);\n      });\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-container\",\n    children: user !== null && user !== void 0 && user.username ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"login-text\",\n      children: [\"Bonjour, \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"login-labels\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: username,\n        placeholder: \"kevin@thefrenchthings.com\",\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"login-labels\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), isSignup && /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"login-labels\",\n        children: \"Password Confirmation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 29\n      }, this), isSignup && /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        value: passwordConfirmation,\n        onChange: e => setPasswordConfirmation(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-login-container\",\n        children: errors === null || errors === void 0 ? void 0 : errors.map(err => /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"error-username\",\n          children: err\n        }, err, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 43\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-button-container\",\n        children: [isSignup ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login-buttons\",\n          onClick: e => createAccount(e),\n          children: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login-buttons\",\n          onClick: e => login(e),\n          children: \"login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 120\n        }, this), !isSignup && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login-buttons\",\n          onClick: e => condRend(e),\n          children: \"create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 35\n        }, this), isSignup && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login-buttons\",\n          id: \"cancel\",\n          onClick: e => condRend(e),\n          children: \"cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"DDr1r1FiRUjUjLQ+P25c+AG5Db0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useContext","useNavigate","AppContext","jsxDEV","_jsxDEV","Login","_s","isSignup","setIsSignup","username","setUsername","password","setPassword","passwordConfirmation","setPasswordConfirmation","errors","setErrors","navigate","user","setUser","condRend","e","preventDefault","createAccount","fetch","method","headers","body","JSON","stringify","password_confirmation","then","r","handleResponse","login","ok","json","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","placeholder","onChange","target","map","id","onClick","_c","$RefreshReg$"],"sources":["/Users/kevinlocke/Dropbox/Development/code/encodeur/Phase-5-Project-and-Notes/phase-5-repo/client/src/pages/Login.js"],"sourcesContent":["import {useState, useContext} from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { AppContext } from \"../Context\"\n\nconst Login = () => {\n\n    const [isSignup, setIsSignup] = useState(false)\n    const [username, setUsername] = useState()\n    const [password, setPassword] = useState()\n    const [passwordConfirmation, setPasswordConfirmation] = useState()\n    const [errors, setErrors] = useState()\n\n    const navigate = useNavigate()\n    const {user, setUser} = useContext(AppContext)\n\n    function condRend(e){\n        e.preventDefault()\n        setIsSignup(!isSignup)\n        setErrors()}\n\n    function createAccount (e){\n        e.preventDefault()\n            fetch(\"/signup\", {\n                method: \"POST\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify(\n                    {username, password, password_confirmation: passwordConfirmation}),})\n                .then(r => handleResponse(r))}\n\n    function login(e){\n        e.preventDefault()\n        fetch(\"/login\", {\n            method:\"POST\",\n            headers: {\"Content-Type\": \"application/json\"},\n            body: JSON.stringify({username, password})})\n            .then(r => handleResponse(r))}\n    \n   \n    function handleResponse(r){\n        if(r.ok)\n            {r.json().then((r) => {setUser(r); navigate(\"/\")})}\n        else \n            {r.json().then((err) => {setErrors(err.errors)})}}\n\n    return(\n\n        <div className=\"login-container\" >\n\n            {user?.username ? <p className=\"login-text\">Bonjour, {user.username}</p> : \n            <form className=\"login-form\" >\n                <label className=\"login-labels\" >Username</label>\n                <input type=\"text\" value={username} placeholder=\"kevin@thefrenchthings.com\" onChange={(e) => setUsername(e.target.value)} />\n                <label className=\"login-labels\">Password</label>\n                <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n                {isSignup &&<label className=\"login-labels\">Password Confirmation</label>}\n                {isSignup && <input type=\"password\" value={passwordConfirmation} onChange={(e) => setPasswordConfirmation(e.target.value)}/>}\n                <div className=\"error-login-container\" >\n                    {errors?.map((err) => <p key={err} id=\"error-username\">{err}</p>)}\n                </div>\n                <div className=\"login-button-container\" >\n                    {isSignup ? <button className=\"login-buttons\" onClick={(e) => createAccount(e)} >submit</button> : <button className=\"login-buttons\" onClick={(e) =>login(e)} >login</button>}\n                    {!isSignup && <button className=\"login-buttons\" onClick={(e) => condRend(e)}>create account</button>}\n                    {isSignup && <button className=\"login-buttons\" id=\"cancel\" onClick={(e) => condRend(e)} >cancel</button> }\n                </div>\n            </form>}\n        </div>\n    )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}