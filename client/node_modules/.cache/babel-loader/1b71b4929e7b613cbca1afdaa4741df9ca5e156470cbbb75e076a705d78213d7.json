{"ast":null,"code":"import _slicedToArray from\"/Users/kevinlocke/Dropbox/Development/code/encodeur/Phase-5-Project-and-Notes/phase-5-repo/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import{AppContext}from\"../Context\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignup=_useState2[0],setIsSignup=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),passwordConfirmation=_useState8[0],setPasswordConfirmation=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var navigate=useNavigate();var _useContext=useContext(AppContext),user=_useContext.user,setUser=_useContext.setUser;function condRend(e){e.preventDefault();setIsSignup(!isSignup);setErrors();}function createAccount(e){e.preventDefault();fetch(\"/signup\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password,password_confirmation:passwordConfirmation})}).then(function(r){return handleResponse(r);});}function login(e){e.preventDefault();fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})}).then(function(r){return handleResponse(r);});}function handleResponse(r){if(r.ok){r.json().then(function(r){setUser(r);navigate(\"/\");});}else{r.json().then(function(err){setErrors(err.errors);console.log(\"errors\",err);});}}console.log(\"errors\",errors);return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:user!==null&&user!==void 0&&user.username?/*#__PURE__*/_jsxs(\"p\",{className:\"login-greeting\",children:[\"Bonjour, \",user.username]}):/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"login-labels\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,placeholder:\"kevin@thefrenchthings.com\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"login-labels\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),isSignup&&/*#__PURE__*/_jsx(\"label\",{className:\"login-labels\",children:\"Password Confirmation\"}),isSignup&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordConfirmation,onChange:function onChange(e){return setPasswordConfirmation(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"error-login-container\",children:errors===null||errors===void 0?void 0:errors.map(function(err){return/*#__PURE__*/_jsx(\"p\",{id:\"error-username\",children:err},err);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-button-container\",children:[isSignup?/*#__PURE__*/_jsx(\"button\",{className:\"login-buttons\",onClick:function onClick(e){return createAccount(e);},children:\"submit\"}):/*#__PURE__*/_jsx(\"button\",{className:\"login-buttons\",onClick:function onClick(e){return login(e);},children:\"login\"}),!isSignup&&/*#__PURE__*/_jsx(\"button\",{className:\"login-buttons\",onClick:function onClick(e){return condRend(e);},children:\"create account\"}),isSignup&&/*#__PURE__*/_jsx(\"button\",{className:\"login-buttons\",id:\"cancel\",onClick:function onClick(e){return condRend(e);},children:\"cancel\"})]})]})});};export default Login;","map":{"version":3,"names":["useState","useContext","useNavigate","AppContext","jsxs","_jsxs","jsx","_jsx","Login","_useState","_useState2","_slicedToArray","isSignup","setIsSignup","_useState3","_useState4","username","setUsername","_useState5","_useState6","password","setPassword","_useState7","_useState8","passwordConfirmation","setPasswordConfirmation","_useState9","_useState10","errors","setErrors","navigate","_useContext","user","setUser","condRend","e","preventDefault","createAccount","fetch","method","headers","body","JSON","stringify","password_confirmation","then","r","handleResponse","login","ok","json","err","console","log","className","children","type","value","placeholder","onChange","target","map","id","onClick"],"sources":["/Users/kevinlocke/Dropbox/Development/code/encodeur/Phase-5-Project-and-Notes/phase-5-repo/client/src/pages/Login.js"],"sourcesContent":["import {useState, useContext} from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { AppContext } from \"../Context\"\n\nconst Login = () => {\n\n    const [isSignup, setIsSignup] = useState(false)\n    const [username, setUsername] = useState()\n    const [password, setPassword] = useState()\n    const [passwordConfirmation, setPasswordConfirmation] = useState()\n    const [errors, setErrors] = useState()\n\n    const navigate = useNavigate()\n    const {user, setUser} = useContext(AppContext)\n\n    function condRend(e){\n        e.preventDefault()\n        setIsSignup(!isSignup)\n        setErrors()}\n\n    function createAccount (e){\n        e.preventDefault()\n            fetch(\"/signup\", {\n                method: \"POST\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify(\n                    {username, password, password_confirmation: passwordConfirmation}),})\n                .then(r => handleResponse(r))}\n\n    function login(e){\n        e.preventDefault()\n        fetch(\"/login\", {\n            method:\"POST\",\n            headers: {\"Content-Type\": \"application/json\"},\n            body: JSON.stringify({username, password})})\n            .then(r => handleResponse(r))}\n    \n   \n    function handleResponse(r){\n        if(r.ok)\n            {r.json().then((r) => {setUser(r); navigate(\"/\")})}\n        else \n            {r.json().then((err) => {setErrors(err.errors);console.log(\"errors\", err) })}}\n\n            console.log(\"errors\", errors)\n\n    return(\n\n        <div className=\"login-container\" >\n\n            {user?.username ? <p className=\"login-greeting\">Bonjour, {user.username}</p> : \n            <form className=\"login-form\" >\n                <label className=\"login-labels\" >Username</label>\n                <input type=\"text\" value={username} placeholder=\"kevin@thefrenchthings.com\" onChange={(e) => setUsername(e.target.value)} />\n                <label className=\"login-labels\">Password</label>\n                <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n                {isSignup &&<label className=\"login-labels\">Password Confirmation</label>}\n                {isSignup && <input type=\"password\" value={passwordConfirmation} onChange={(e) => setPasswordConfirmation(e.target.value)}/>}\n                <div className=\"error-login-container\" >\n                    {errors?.map((err) => <p key={err} id=\"error-username\">{err}</p>)}\n                </div>\n                <div className=\"login-button-container\" >\n                    {isSignup ? <button className=\"login-buttons\" onClick={(e) => createAccount(e)} >submit</button> : <button className=\"login-buttons\" onClick={(e) =>login(e)} >login</button>}\n                    {!isSignup && <button className=\"login-buttons\" onClick={(e) => condRend(e)}>create account</button>}\n                    {isSignup && <button className=\"login-buttons\" id=\"cancel\" onClick={(e) => condRend(e)} >cancel</button> }\n                </div>\n            </form>}\n        </div>\n    )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}